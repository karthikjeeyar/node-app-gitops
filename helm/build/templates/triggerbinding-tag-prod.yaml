apiVersion: triggers.tekton.dev/v1alpha1
kind: TriggerBinding
metadata:
  name: {{ .Values.app.name }}-tb-prod
  namespace: {{ .Release.Namespace }}
  labels:
    backstage.io/kubernetes-id: {{ .Values.app.name }}
    app.kubernetes.io/name: {{ .Values.app.name }}
    app.kubernetes.io/instance: {{ .Values.app.name }}
    app.kubernetes.io/component: pipeline
spec:
  params:
    # Promote from latest (same image as staging, just different tag)
    - name: source-image-tag
      value: latest
    - name: destination-image-tag
      value: $(extensions.tag_name)
    - name: environment
      value: prod

